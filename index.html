<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WTR UNL Sealed Generator</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      background: #f9f9f9;
    }
    button {
      padding: 1rem;
      margin-bottom: 1rem;
      font-size: 1rem;
    }
    pre {
      background: #fff;
      padding: 1rem;
      border: 1px solid #ccc;
      overflow-x: auto;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>WTR UNL Sealed Generator</h1>
  <button onclick="generateDeck()">Generate Sealed Pool</button>
  <pre id="output"></pre>

  <script>
    function sample(array, count) {
      const copy = [...array];
      const result = [];
      for (let i = 0; i < count && copy.length > 0; i++) {
        const index = Math.floor(Math.random() * copy.length);
        result.push(copy.splice(index, 1)[0]);
      }
      return result;
    }

    const LEGENDARY = ["Scabskin Leathers", "Tectonic Plating", "Mask of Momentum", "Braveforge Bracers", "Fyendal's Spring Tunic"];
    const MAJESTIC = ["Alpha Rampage (red)", "Bloodrush Bellow (yellow)", "Crippling Crush (red)", "Spinal Crush (red)", "Lord of Wind (blue)", "Ancestral Empowerment (red)", "Glint the Quicksilver (blue)", "Steelblade Supremacy (red)", "Enlightened Strike (red)", "Tome of Fyendal (yellow)"];
    const SUPER = ["Reckless Swing (blue)", "Sand Sketched Plan (blue)", "Bone Head Barrier (yellow)", "Cranial Crush (blue)", "Forged for War (yellow)", "Show Time! (blue)", "Mugenshi: RELEASE (blue)", "Hurricane Technique (yellow)", "Pounding Gale (red)", "Rout (red)", "Singing Steelblade (yellow)", "Ironsong Determination (yellow)", "Last Ditch Effort (blue)", "Crazy Brew (blue)", "Rememberance (yellow)"];

    const BRUTE_RARE = ["Breakneck Battery (red)", "Breakneck Battery (yellow)", "Breakneck Battery (blue)", "Savage Feast (red)", "Savage Feast (yellow)", "Savage Feast (blue)", "Barraging Beatdown (red)", "Barraging Beatdown (yellow)", "Barraging Beatdown (blue)"];
    const GUARDIAN_RARE = ["Disable (red)", "Disable (yellow)", "Disable (blue)", "Staunch Response (red)", "Staunch Response (yellow)", "Staunch Response (blue)", "Blessing of Deliverance (red)", "Blessing of Deliverance (yellow)", "Blessing of Deliverance (blue)"];
    const NINJA_RARE = ["Fluster Fist (red)", "Fluster Fist (yellow)", "Fluster Fist (blue)", "Blackout Kick (red)", "Blackout Kick (yellow)", "Blackout Kick\t(blue)", "Flic Flak (red)", "Flic Flak (yellow)", "Flic Flak (blue)"];
    const WARRIOR_RARE = ["Overpower (red)", "Overpower (yellow)", "Overpower (blue)", "Steelblade Shunt (red)", "Steelblade Shunt (yellow)", "Steelblade Shunt (blue)", "Warrior's Valor (red)", "Warrior's Valor (yellow)", "Warrior's Valor (blue)"];
    const GENERIC_RARE = ["Snatch (red)", "Snatch (yellow)", "Snatch (blue)", "Energy Potion (blue)", "Potion of Strength (blue)", "Timesnap Potion (blue)", "Sigil of Solace (red)", "Sigil of Solace (yellow)", "Sigil of Solace (blue)", "Drone of Brutality (red)", "Drone of Brutality (yellow)", "Drone of Brutality (blue)"];

    const ALL_RARES = [...BRUTE_RARE, ...GUARDIAN_RARE, ...NINJA_RARE, ...WARRIOR_RARE, ...GENERIC_RARE];

    const CLASS_COMMON = [...Array(72).keys()].map(i => `Class Common ${i + 1}`); // placeholder
    const GENERIC_COMMON = [...Array(72).keys()].map(i => `Generic Common ${i + 1}`); // placeholder
    const COMMON_EQUIPMENT = [...Array(12).keys()].map(i => `Common Equipment ${i + 1}`); // placeholder

    function generateDeck() {
      let deck = [];
      let equipment = [];

      for (let i = 0; i < 6; i++) {
        deck.push(...sample(CLASS_COMMON, 7));
        deck.push(...sample(GENERIC_COMMON, 4));
        equipment.push(...sample(COMMON_EQUIPMENT, 1));

        const rareRoll = Math.random();
        if (rareRoll < 1 / 12) {
          deck.push(...sample(MAJESTIC, 1), ...sample(ALL_RARES, 1));
        } else if (rareRoll < 1 / 12 + 1 / 6) {
          deck.push(...sample(SUPER, 1), ...sample(ALL_RARES, 1));
        } else {
          deck.push(...sample(ALL_RARES, 2));
        }

        const foilRoll = Math.random();
        if (foilRoll < 1 / 96) {
          equipment.push(...sample(LEGENDARY, 1));
        } else if (foilRoll < 1 / 96 + (1 - 1 / 96) * (1 / 168)) {
          deck.push(...sample(MAJESTIC, 1));
        } else if (foilRoll < 1 / 96 + (1 - 1 / 96) * (3 / 168)) {
          deck.push(...sample(SUPER, 1));
        } else if (foilRoll < 1 / 96 + (1 - 1 / 96) * (24 / 168)) {
          deck.push(...sample(ALL_RARES, 1));
        } else {
          deck.push(...sample([...GENERIC_COMMON, ...CLASS_COMMON, ...COMMON_EQUIPMENT], 1));
        }
      }

      const countCards = list =>
        list.reduce((acc, card) => {
          acc[card] = (acc[card] || 0) + 1;
          return acc;
        }, {});

      const output = [];
      const timestamp = new Date().toISOString().slice(0, 19).replace(/[:T]/g, "_");
      output.push(`Name: WTR_UNL_SEALED_${timestamp}`);
      output.push("\nArena cards\n2x Harmonized Kodachi\n1x Dawnblade\n1x Romping Club\n1x Anothos\n");

      output.push("Equipment:");
      for (const [card, qty] of Object.entries(countCards(equipment))) {
        output.push(`${qty}x ${card}`);
      }

      output.push("\nDeck cards:");
      for (const [card, qty] of Object.entries(countCards(deck))) {
        output.push(`${qty}x ${card}`);
      }

      document.getElementById("output").textContent = output.join("\n");
    }
  </script>
</body>
</html>
